---
  - name: Install Docker on Ubuntu VM
    hosts: all                  # Can specify a group or a specific host
    become: yes                 # Use sudo to run commands as root
    tasks:
      - name: Update apt package list
        apt:
          update_cache: yes      # Update the apt cache to ensure we have the latest packages
  
      - name: Install required dependencies for Docker
        apt:
          name:
            - apt-transport-https
            - ca-certificates
            - curl
            - software-properties-common
          state: present          # Ensure these packages are installed
  
      - name: Add Docker GPG key
        apt_key:
          url: https://download.docker.com/linux/ubuntu/gpg  # Add Dockerâ€™s official GPG key
          state: present          # Ensure the GPG key is added
  
      - name: Add Docker APT repository
        apt_repository:
          repo: "deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable"
          state: present          # Add Docker repository
  
      - name: Install Docker
        apt:
          name: docker-ce         # Install the Docker Community Edition
          state: present          # Ensure Docker is installed
  
      - name: Start Docker service
        service:
          name: docker
          state: started          # Start Docker service
          enabled: yes            # Ensure Docker starts on boot
  